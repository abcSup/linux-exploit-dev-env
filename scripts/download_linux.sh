#!/bin/bash

set -o errexit

VERSION="$1"
MIN_VERSION=2
MAX_VERSION=6

if [ -z "$VERSION" ]; then
    echo "usage: $0 VERSION"
    exit 1
fi

first_char=${VERSION:0:1}

if [ $first_char == v ]; then
    VERSION=${VERSION:1}
fi

first_char=${VERSION:0:1}

if [ $first_char -ge $MIN_VERSION ] && [ $first_char -le $MAX_VERSION ]; then
    wget https://cdn.kernel.org/pub/linux/kernel/v${first_char}.x/linux-${VERSION}.tar.xz
    tar -xf linux-${VERSION}.tar.xz
else
    echo "$first_char is not a valid kernel major version number"
    exit 1
fi
